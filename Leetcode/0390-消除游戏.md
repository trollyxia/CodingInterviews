# 390-消除游戏

难度 中等



## 题目描述

给定一个从1 到 n 排序的整数列表。
首先，从左到右，从第一个数字开始，每隔一个数字进行删除，直到列表的末尾。
第二步，在剩下的数字中，从右到左，从倒数第一个数字开始，每隔一个数字进行删除，直到列表开头。
我们不断重复这两步，从左到右和从右到左交替进行，直到只剩下一个数字。
返回长度为 n 的列表中，最后剩下的数字。

示例：
```
输入:
n = 9,
1 2 3 4 5 6 7 8 9
2 4 6 8
2 6
6

输出:
6
```


## 思路

以`n=12`为例，刚开始所有的数字为`1,2,3,4,5,6,7,8,9,10,11,12`

第一次删除，剩下的数字为`2,4,6,8,10,12`。此时若把每个数字除以2，就可以将问题转换为求`n=6`（首先右向左删除）的结果。设该问题结果为`k`，那么我们最后返回`k*2`即可。

此时所有数字为`1,2,3,4,5,6`，进行第二次删除。由于是从右向左删除，剩下的数字为`1,3,5`。此时若把每个数字加1后再除以2，又可以将问题转换为求`n=3`（首先从左向右删除）的结果。设该问题结果为`k`，那么我们最后返回`k*2-1`即可。

以此类推，进行递归。



## 代码

```c++
class Solution {
public:
    int helper(int n, int mul, int sub, bool left_to_right) {
        if (n == 1) return mul - sub;
        int res;
        if (left_to_right) res = helper(n/2, 2, 0, false);
        if (!left_to_right && n % 2 == 0) res = helper(n/2, 2, 1, true);
        if (!left_to_right && n % 2 == 1) res = helper(n/2, 2, 0, true);
        return res * mul - sub;
    }
    int lastRemaining(int n) {
        return helper(n, 1, 0, true);
    }
};
```

